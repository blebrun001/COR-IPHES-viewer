<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dataverse 3D Viewer</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./public/css/styles.css" />
  </head>
  <body>
    <!-- Application shell grouping header, sidebar, and 3D viewer surface -->
    <div class="app-shell">
      <!-- Header keeps project identity and controls global actions -->
      <header class="top-bar">
        <div class="top-bar__left">
          <button
            id="toggleSidebar"
            type="button"
            class="top-bar__toggle"
            aria-controls="appSidebar"
            aria-expanded="true"
            data-i18n-attr="aria-label:header.toggleSidebar"
          >
            ☰
          </button>
          <h1 class="project-title" data-i18n="header.title">Esqueletos en Línea</h1>
          <p class="project-subtitle" data-i18n="header.subtitle">COR-IPHES 3D Model Viewer</p>
        </div>
        <div class="top-bar__center"></div>
        <div class="top-bar__right">
          <img
            src="./public/ressources/iphes.png"
            alt="IPHES-CERCA logo"
            class="top-bar__logo"
            decoding="async"
          />
        </div>
      </header>
      <div class="app-layout">
        <!-- Sidebar hosts dataset selection, metadata, and external resources -->
        <aside id="appSidebar" class="sidebar" tabindex="-1" aria-expanded="true">
          <section class="sidebar-section selectors-section">
            <div class="sidebar-heading" data-i18n="sidebar.selectionHeading">Selection</div>
            <div class="sidebar-selectors">
              <div class="selector-group">
                <label for="datasetSelect" data-i18n="sidebar.datasetLabel">Species</label>
                <select id="datasetSelect">
                  <option value="" data-i18n="sidebar.datasetLoadingOption">Loading datasets...</option>
                </select>
              </div>
              <div class="selector-group">
                <label for="modelSelect" data-i18n="sidebar.modelLabel">Anatomical element</label>
                <select id="modelSelect" disabled>
                  <option value="" data-i18n="sidebar.modelDisabledOption">Select a dataset</option>
                </select>
              </div>
              <div class="selector-group selector-group--compact">
                <label for="reloadDatasets" data-i18n="sidebar.actionsLabel">Actions</label>
                <button id="reloadDatasets" type="button" data-i18n="sidebar.reloadButton">Reload lists</button>
              </div>
            </div>
          </section>
          <section class="sidebar-section metadata-section">
            <div class="sidebar-heading" data-i18n="sidebar.metadataHeading">Dataset metadata</div>
            <div id="metadataPanel" class="metadata-scroll"></div>
          </section>
          <section class="sidebar-section links-section">
            <div class="sidebar-heading" data-i18n="sidebar.moreInfoHeading">More infos</div>
            <div class="external-links">
              <a id="gbifLink" class="external-link" href="#" target="_blank" rel="noopener noreferrer" hidden data-i18n="sidebar.links.gbif">Species (GBIF)</a>
              <a id="coraLink" class="external-link" href="#" target="_blank" rel="noopener noreferrer" hidden data-i18n="sidebar.links.cora">Species (CORA-RDR)</a>
              <a id="uberonLink" class="external-link" href="#" target="_blank" rel="noopener noreferrer" hidden data-i18n="sidebar.links.uberon">Anatomical element (OLS UBERON)</a>
              <button id="aboutButton" type="button" class="external-link" data-i18n="sidebar.links.about">About the project</button>
              <div class="language-selector" role="group" aria-labelledby="languageSelectLabel">
                <label id="languageSelectLabel" for="languageSelect" class="language-selector__label" data-i18n="language.selectorLabel">Language</label>
                <select id="languageSelect" class="language-selector__control" aria-describedby="languageSelectLabel"></select>
              </div>
            </div>
          </section>
        </aside>
        <!-- Main area renders the Three.js canvas, status banner, and viewer toolbar -->
        <main class="viewer-area">
          <div id="viewer3D" class="viewer-surface"></div>
          <div id="status" class="viewer-status"></div>
          <div id="measurementOverlay" class="measurement-overlay"></div>
          <img
            src="./public/ressources/cc.png"
            alt="Creative Commons logo"
            class="viewer-watermark"
            decoding="async"
          />
          <div id="viewerToolbar" class="viewer-toolbar" data-collapsed="true">
            <div class="viewer-toolbar__inner">
              <div class="viewer-toolbar__group viewer-toolbar__group--primary">
                <div class="toolbar-control">
                  <label for="projectionMode" data-i18n="viewer.projection.label">Projection</label>
                  <select id="projectionMode">
                    <option value="perspective" data-i18n="viewer.projection.perspective">Perspective</option>
                    <option value="orthographic" data-i18n="viewer.projection.orthographic">Orthographic</option>
                  </select>
                </div>
                <div class="toolbar-control">
                  <label for="orbitMode" data-i18n="viewer.orbit.label">Orbit</label>
                  <select id="orbitMode">
                    <option value="upright" data-i18n="viewer.orbit.upright">Upright</option>
                    <option value="free" data-i18n="viewer.orbit.free">Free</option>
                  </select>
                </div>
                <div class="toolbar-buttons toolbar-buttons--primary">
                  <button id="captureScreenshot" type="button" data-i18n="viewer.buttons.capture">Capture</button>
                  <button id="resetView" type="button" data-i18n="viewer.buttons.resetView">Reset View</button>
                </div>
              </div>
              <div class="viewer-toolbar__group viewer-toolbar__group--secondary" id="viewerToolbarSecondary">
                <div class="toolbar-buttons toolbar-buttons--secondary">
                  <button id="toggleTextures" type="button" data-i18n="viewer.buttons.disableTextures">Disable Textures</button>
                  <button id="toggleWireframe" type="button" data-i18n="viewer.buttons.enableWireframe">Enable Wireframe</button>
                  <button id="toggleLighting" type="button" data-i18n="viewer.buttons.dimLights">Dim Lights</button>
                  <button id="toggleMeasure" type="button" data-i18n="viewer.buttons.measure">Measure</button>
                  <button id="clearMeasurements" type="button" data-i18n="viewer.buttons.clearMeasurements">Clear Measurements</button>
                </div>
              </div>
              <button
                id="viewerToolbarToggle"
                class="viewer-toolbar__toggle"
                type="button"
                aria-expanded="false"
                aria-controls="viewerToolbarSecondary"
                data-i18n="viewer.toolbar.showMore"
              >
                More controls
              </button>
            </div>
          </div>
        </main>
      </div>
      <div id="sidebarOverlay" hidden></div>
    </div>

    <!-- Import map resolves Three.js modules when running without a bundler -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
          "three/examples/jsm/": "https://unpkg.com/three@0.161.0/examples/jsm/"
        }
      }
    </script>
    <!-- About dialog content is toggled by about.js for additional context -->
    <dialog id="aboutDialog" class="about-dialog">
      <img
        src="./public/ressources/banner.jpg"
        alt="Esqueletos en Línea banner"
        class="about-banner"
        decoding="async"
        data-i18n-attr="alt:about.bannerAlt"
      />
      <h2 data-i18n="about.title">About the project</h2>
      <section>
        <h3 data-i18n="about.sectionIntro.heading">Project overview</h3>
        <p data-i18n="about.sectionIntro.paragraph1">
          Esqueletos en Línea centralises high-quality 3D models and metadata to help researchers, students, and museum professionals explore zooarchaeological collections online.
        </p>
      </section>
      <section>
        <h3 data-i18n="about.sectionPartners.heading">Institutional partners</h3>
        <ul>
          <li data-i18n="about.sectionPartners.items.item1">Partner Organisation Placeholder 1</li>
          <li data-i18n="about.sectionPartners.items.item2">Partner Organisation Placeholder 2</li>
          <li data-i18n="about.sectionPartners.items.item3">Partner Organisation Placeholder 3</li>
        </ul>
      </section>
      <section>
        <h3 data-i18n="about.sectionContributors.heading">Contributors</h3>
        <ul>
          <li data-i18n="about.sectionContributors.items.item1">Contributor Name Placeholder 1</li>
          <li data-i18n="about.sectionContributors.items.item2">Contributor Name Placeholder 2</li>
          <li data-i18n="about.sectionContributors.items.item3">Contributor Name Placeholder 3</li>
        </ul>
      </section>
      <div class="about-logos" role="group" aria-label="Project partners">
        <img src="./public/ressources/iphes.png" alt="IPHES-CERCA logo" />
        <img src="./public/ressources/cerca.png" alt="CERCA logo" />
        <img src="./public/ressources/fecyt.jpg" alt="FECYT logo" />
        <img src="./public/ressources/ministerio.png" alt="Ministerio de Ciencia e Innovación logo" />
      </div>
      <button
        id="closeAbout"
        type="button"
        class="about-close"
        data-i18n="about.closeButton"
        data-i18n-attr="aria-label:about.closeAria"
      >&times;</button>
    </dialog>

    <!-- Entry modules: core viewer bootstrap + supporting UI behaviours -->
    <script type="module" src="./public/js/app.js"></script>
    <script type="module" src="./public/js/about.js"></script>
    <script type="module" src="./public/js/sidebar.js"></script>
  </body>
</html>
